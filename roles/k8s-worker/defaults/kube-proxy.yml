---
#-----------------------------------------------
# Kube-proxy variables for workers configuration
#-----------------------------------------------
package_url: "{{ kube_worker_release_url }}/kube-proxy"
binary_path: /usr/bin
conf_path: /etc/kubernetes
service_force_restart: no
kubeconfig_path: /var/lib/kube-proxy
proxy_mode: iptables
verbosity: 2
service_force_restart: no

# Kubeconfig for kube-proxy
configuration:
  apiVersion: v1
  kind: Config
  users:
  - name: "{{ kubeconfig_name }}"
    user:
      client-certificate: "{{ kube_worker_tls_cert_file }}"
      client-key: "{{ kube_worker_tls_private_key_file }}"
      token: "{{ kubeconfig_user_token }}"
  clusters:
  - name: "{{ kubeconfig_name }}"
    cluster:
      certificate-authority: "{{ kube_worker_tls_ca_file }}"
      server: "{{ kubeconfig_api_server }}"
  contexts:
  - context:
      cluster: "{{ kubeconfig_name }}"
      user: kube-proxy
    name: kube-proxy
  current-context: kube-proxy