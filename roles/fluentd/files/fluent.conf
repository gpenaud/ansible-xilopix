
# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY, USE /templates/conf/fluent.conf.erb

# @include systemd.conf
# @include kubernetes.conf

<source>
  @type tail
  path /var/log/syslog
  format syslog
  tag syslog.*
</source>

<source>
  @type tail
  path /var/log/containers/*.log
  format json
  tag kubernetes.*
  time_format %Y-%m-%dT%H:%M:%S.%NZ
  pos_file /var/log/fluentd-containers.log.pos
  read_from_head true
</source>

<match kubernetes.var.log.containers.hello**.log>
  @type parser
  format /^(?<remote>[^ ]*) (?<host>[^ ]*) (?<user>[^ ]*) \[(?<time>[^\]]*)\] \"(?<method>\S+) (?<path>\S+) (?<http>\S+)\" (?<code>[^ ]*) (?<size>[^ ]*) \"(?<uri>[^ ]*)\" \"(?<agent>[^\"]*)\" \"(?<hostip>[^ ]*)\".*$/
  time_format %e/%b/%Y:%H:%M:%S %z
  key_name log
  add_prefix parsed
</match>

<match parsed.kubernetes.var.log.containers.hello**.log>
  @type stdout
</match>

<match syslog.*>
  @type file
  path /tmp/mysyslog
</match>

<match kubernetes.*>
  @type file
  path /tmp/mykubernetes
</match>